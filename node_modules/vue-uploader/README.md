# vue-uploader

vue uploader是一个vue的上传插件,基于html5开发,轻量级,简洁易用，支持vue1.0以上版本


## 安装并使用

### nodejs

```bash
npm install vue-uploader --save-dev
```

```js
import Vue from "vue"
import VueUploader from "vue-uploader"

Vue.use(VueUploader,options)
```

### 浏览器

```html
<script src="serverpath/vue.js"></script>
<script src="serverpath/vue-uploader.js"></script>
```

脚本引入后会有一个全局变量`VueUploader`

```js
Vue.use(VueUploader,options)
```

### 模板代码示例

```html
<vue-uploader :server="uploadServerPath"></vue-uploader>
```

## 全局安装选项

```js
Vue.use(VueUploader, {
        //安装后组件的全局名称
        name: "vue-uploader",
        //图片压缩选项
        compress: {
            //压缩后最大高度
            height: 500,
            //压缩后最大宽度
            width: 500,
            //jpeg压缩质量
            quality: 80
       }
})
```

## 组件属性


属性名称	|	是否必填	|	类型		|	默认值	|	说明
------:	|	:------:	|	:------:	|	:-----:	|	:----
server	|	是		|	String	|   undefined	|	上传地址路径，后端需要返回json数据包，成功时返回`{"ok":true}`，失败时返回`{"ok":false,"msg":"error reason"}`
multiple	|	否		|	Boolean	|	`false`	|	是否允许一次选取多个文件
mimeTypes	|	否	|	Array	|	`["*"]`		|	媒体类型
extensions	|	否	|	Array	|	`[]`	|	文件扩展名，空数组表示允许所有
sizeLimit		|	否	|	Number	|	`100*1024`	|	单个文件大小，单位字节
countLimit	|	否	|	Number	|	`1`	|	支持上传的文件数量
fieldName	|	否	|	String	|	`"file"`	|	上传请求时文件对应的参数名称
compress		|	否	|	Object	|	`indefined`	|	图片压缩选项，与全局安装的compress一致，设置后会覆盖全局的
hidden	|	否	|	Boolean	|	`false`	|	是否隐藏界面，如果设置为true，可以自己通过组件的data，method以及事件来实现自定义的ui

完整属性模板代码示例

```html
  <vue-uploader :server="serverPath" :multiple="true" :mime-types="['image/jpg','image/png']"  :extensions="['jpg','png']"  :size-limit="10*1024*1024" :count-limit="100" :compress="{height:500,width:500,quality:80}" :hidden="false" v-ref:uploader></vue-uploader>
```

## 组件事件

事件名称		|	data类型		|	说明
-----:		|	:-------:		|	:-----
fileAdded		|	UploadFile	|	文件成功加入后触发
fileRemoved	|	UploadFile	|	文件成功删除后触发

###  UploadFile属性介绍

属性名称	|	类型		|	说明
-----:	|	:------:	|	:------
name	|	String	|	名称
type		|	String	|	文件类型，如`image/png`
size		|	Number	|	文件大小，单位字节
hr_size	|	String	|	人类可读的大小说明，如`5.86M`
status	|	String	|	状态，`ready`代表已就绪，`uploading`代表上传进行中，`abort`代表上传被中断，`finished`代表已经完成，`error`代表上传失败，遇到错误
progress	|	Number	|	进度信息，取值是0到1之间小数


### UploadFile方法介绍

方法名称	|	返回值类型	|	说明
-----:	|	:-------:       |   :--------
makeThumbnail(callback)	|	undefined	|	创建缩略图，可以在完成后进行回调
start		|	Boolean	|	开始进行上传
abort	|	Boolean	|	中断上传
remove	|	Boolean	|	从队列里删除
equals(other)	|	Boolean	|	与其它的UploadFile或者File进行比较


## 自定义UI

通过hidden属性隐藏组件自带的UI，通过上传组件的data和事件来组装自定义UI，组件data说明如下：

属性名称	|	介绍
------:	|	:------
progress	|	整体进度，取值在0-1之间的小数
totalSize   |   文件总大小
list	|	文件列表，元素为UploadFile类型

> 关于UploadFile和组件所支持的事件，上面已经说明，详细可以参数example