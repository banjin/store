<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>txt upload demo</title>
    <script src="http://cdn.bootcss.com/vue/1.0.25/vue.min.js"></script>
    <script src="../dist/vue-uploader.js"></script>
    <script>
        window.onload = function () {
            Vue.use(VueUploader)
            window.vm = new Vue({
                el: document.body,
                data: {
                    text: null
                },
                computed: {
                    file: function () {
                        return this.$refs.uploader.list[0]
                    }
                },
                ready: function () {
                    var vm = this
                    vm.$on("fileAdded", function (uploadFile) {
                        var reader = new FileReader()
                        reader.onload = function (e) {
                            vm.text = e.target.result
                        }
                        reader.readAsText(uploadFile.origin, "utf8")
                    })
                    vm.$on("fileRemoved", function (uploadFile) {
                        vm.text = null
                    })
                }
            })
        }

    </script>
</head>
<body>
<vue-uploader server="upload.json" :size-limit="5*1024*1024" :count-limit="1" :extensions="['txt','js']"
              :hidden="true" :mime-types="['text/plain']" v-ref:uploader></vue-uploader>
<div style="margin-bottom: 20px">
    <template v-if="!file">
        <a href="javascript:;" @click="$refs.uploader.select">选择一个文本文件</a>
    </template>
    <template v-else>
        {{file.name}},{{file.hr_size}},
        <span style="color: red">
            进度:{{file.progress}}
        </span>
        <button type="button" v-if="file.status=='ready'" @click="file.start()">
            开始上传
        </button>
        <button type="button" v-if="file.status=='uploading'" @click="file.abort()">
            取消上传
        </button>
        <button type="button" v-if="file.status=='ready'||file.status=='finished'" @click="file.remove()">
            删除文件
        </button>
    </template>
</div>

<pre v-if="text" style="padding: 15px;border: 1px dashed darkgoldenrod;overflow: auto">
    {{text}}
</pre>
</body>
</html>