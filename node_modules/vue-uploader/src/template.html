<div class="vue-uploader">
    <div style="margin-bottom: 10px" v-if="!hidden">
        <button type="button" @click="select" :disabled="list.length >= countLimit">添加文件</button>
        <button type="button" @click="startAll">全部开始</button>
        <button type="button" @click="abortAll">全部取消</button>
        <button type="button" @click="removeAll">全部删除</button>
        <button type="button" @click="removeFinished">删除已完成</button>
        <span v-if="list.length">{{overview}}</span>
    </div>

    <table v-if="!hidden">
        <tbody>
        <tr v-for="file in list">
            <td>
                <div class="thumbnail" v-if="file.thumbnail">
                    <img :src="file.thumbnail">
                </div>
            </td>
            <td :title="file.name">{{file.name | trancateHead}}</td>
            <td>{{file.size | sizeConvert}}</td>
            <td>
                <span v-if="file.status == 'uploading' && file.progress">{{file.progress | percentage}}</span>
            </td>
            <td>
                <span class="error" v-if="file.status=='error'">上传出错</span>
                <span class="success" v-if="file.status=='finished'">已完成</span>
                <button type="button" @click="file.start()"
                        v-if="file.status != 'uploading' && file.status != 'finished'">
                    开始
                </button>
                <button type="button" @click="file.abort()" v-if="file.status=='uploading'">取消</button>
                <button type="button" @click="file.remove()" v-if="file.status!='uploading'">删除</button>
            </td>
        </tr>
        </tbody>
    </table>

    <input v-el:file type="file" style="display: none" @change="add" :multiple="multiple"
           :accept="mimeTypes.join(',')">
</div>